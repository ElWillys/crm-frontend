<div>
  <h2>Listado de Tareas</h2>

  <button (click)="crearTarea()">Crear nueva tarea</button>

  <table>
    <thead>
      <tr>
        <th>Título</th>
        <th>Descripción</th>
        <th>Fecha Inicio</th>
        <th>Fecha Fin</th>
        <th>Estado</th>
        <th>ID Usuario</th>
        <th>ID Cliente</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let task of tasks">
        <td>{{ task.title }}</td>
        <td>{{ task.description || '-' }}</td>
        <td>{{ task.initialDate || '-' }}</td>
        <td>{{ task.endDate || '-' }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.user?.id || '-' }}</td>
        <td>{{ task.customer?.id || '-' }}</td>
        <td>
          <button (click)="editarTarea(task)">Editar</button>
          <button (click)="eliminarTarea(task)">Borrar</button>
        </td>
      </tr>
      <tr *ngIf="tasks.length === 0">
        <td colspan="8" style="text-align: center; font-style: italic;">
          No hay tareas registradas.
        </td>
      </tr>
    </tbody>
  </table>

  <app-task-popup
    *ngIf="modoPopup !== 'CLOSED'"
    [modo]="modoPopup"
    [task]="tareaSeleccionada"
    (guardado)="onPopupGuardado()"
    (cancelado)="onPopupCancelado()"
  />
</div>
